<section class="two-buttons section-{{ section.id }}-padding">
  <div class="two-buttons__wrapper" data-two-buttons-wrapper data-brand="{{ section.settings.brand_name | escape }}">
    {%- if section.settings.button_1_label != blank -%}
      <a href="{{ section.settings.button_1_link | default: '#' }}"
         class="two-buttons__btn two-buttons__btn--1"
         data-two-buttons-btn>
        {{ section.settings.button_1_label }}
      </a>
    {%- endif -%}

    {%- if section.settings.button_2_label != blank -%}
      <a href="{{ section.settings.button_2_link | default: '#' }}"
         class="two-buttons__btn two-buttons__btn--2"
         data-two-buttons-btn>
        {{ section.settings.button_2_label }}
      </a>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Two Buttons",
  "tag": "section",
  "class": "two-buttons-section",
  "settings": [
    {
      "type": "text",
      "id": "brand_name",
      "label": "Brand name (saved in localStorage)",
      "default": "default_brand"
    },

    { "type": "header", "content": "Button 1" },
    { "type": "text", "id": "button_1_label", "label": "Button 1 label", "default": "Button 1" },
    { "type": "url", "id": "button_1_link", "label": "Button 1 link" },

    { "type": "header", "content": "Button 2" },
    { "type": "text", "id": "button_2_label", "label": "Button 2 label", "default": "Button 2" },
    { "type": "url", "id": "button_2_link", "label": "Button 2 link" },

    { "type": "header", "content": "Layout" },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        { "value": "row", "label": "Side by side" },
        { "value": "column", "label": "Stacked" }
      ],
      "default": "row"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 24
    }
  ],
  "presets": [{ "name": "Two Buttons" }]
}
{% endschema %}

<script>
  (function () {
    document.addEventListener('click', function (e) {
      const btn = e.target.closest('[data-two-buttons-btn]');
      if (!btn) return;

      const wrapper = btn.closest('[data-two-buttons-wrapper]');
      const brand = (wrapper && wrapper.dataset.brand) ? wrapper.dataset.brand : 'default_brand';
      const value = (btn.textContent || '').trim();

      // Save before navigation
      try {
        localStorage.setItem('selected_brand', brand);
        localStorage.setItem('selected_value', value);
      } catch (err) {
        // ignore storage errors
      }

      // Let the anchor work normally
    });
  })();
</script>

<style>
  .two-buttons-section.section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  @media screen and (min-width: 750px) {
    .two-buttons-section.section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .two-buttons__wrapper {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    align-items: center;
    gap: 0px;
    flex-wrap: wrap;
  }

  .two-buttons__btn {
    text-align: center;
    display: inline-block;
    padding: 10px;
    background: #f2f2f2;
    color: #000;
    border: 0;
    border-radius: 0;
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    transition: background 0.2s, color 0.2s, border-color 0.2s;
  }

  .two-buttons__btn:hover {
    background: transparent;
    color: #1a1a1a;
    text-decoration: underline;
  }

  .two-buttons__btn--1 {
    border-right: 1px solid #000;
  }
</style>