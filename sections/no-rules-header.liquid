{% comment %}
  NO RULES â€“ Header: promo bar, logo, nav, login, search, cart.
  Mobile: hamburger toggles drawer with menu (same pattern as header-mobile: toggle opens menu).
  Cart: id="cart-icon-bubble", data-cart-sidebar, data-cart-count. Login: data-open-auth-sidebar when applicable.
{% endcomment %}
{% if routes.account_login_url contains '/account/login' %}
  {% assign no_rules_login_use_sidebar = true %}
{% else %}
  {% assign no_rules_login_use_sidebar = false %}
{% endif %}
<header class="no-rules-header" id="no-rules-header-{{ section.id }}">
  {% if section.settings.promo_text != blank %}
    <p class="no-rules-promo-bar">{{ section.settings.promo_text }}</p>
  {% endif %}
  <div class="no-rules-header-inner">
    <div class="no-rules-header-inner__left">
      <button type="button" class="no-rules-menu-toggle" data-no-rules-mobile-menu aria-label="{{ 'sections.header.menu' | t }}" aria-expanded="false" aria-controls="no-rules-menu-drawer-{{ section.id }}">
        <span class="no-rules-menu-toggle__icon">{% render 'icon-hamburger' %}</span>
        <span class="no-rules-menu-toggle__close" aria-hidden="true">{% render 'icon-close', class: 'no-rules-close-icon' %}</span>
      </button>
    </div>
    <a href="/pages/no-rules" class="no-rules-logo" aria-label="{{ shop.name }}">
      {% if section.settings.logo != blank %}
        <img src="{{ section.settings.logo | image_url: width: 312 }}" alt="{{ shop.name }}" width="156" height="28" loading="eager" />
      {% else %}
        <span class="no-rules-logo-text">{{ shop.name }}</span>
      {% endif %}
    </a>
    <nav class="no-rules-nav" aria-label="Main">
      {% for link in linklists[section.settings.menu].links %}
        {% if link.title == "mushq" %}
          <a href="{{ link.url }}">
            <img src="/cdn/shop/files/Website_logo.png?v=1760954922&width=300" class="no-mushq-logo" height="25">
          </a>
        {% else %}
          <a href="{{ link.url }}">{{ link.title }}</a>
        {% endif %}
      {% endfor %}
    </nav>
    <div class="no-rules-header-inner__right no-rules-header-actions">
      {% if shop.customer_accounts_enabled and section.settings.show_login %}
        <a href="{{ routes.account_login_url }}" class="no-rules-header-action no-rules-header-action--login"{% if no_rules_login_use_sidebar %} data-open-auth-sidebar{% endif %} aria-label="{{ 'customer.log_in' | t }}">
          {% render 'icon-account-2' %}
          {% if section.settings.show_login_text %}
            <span class="no-rules-action-label">{{ 'customer.log_in' | t }}</span>
          {% endif %}
        </a>
      {% endif %}
      <a href="{{ routes.search_url }}" class="no-rules-header-action no-rules-header-action--search" aria-label="{{ 'general.search.search' | t }}">
        {% render 'icon-search-03' %}
      </a>
      <a href="{{ routes.cart_url }}" class="no-rules-header-action no-rules-header-action--cart" id="cart-icon-bubble"{% if settings.show_quick_cart %} data-cart-sidebar{% endif %} aria-label="{{ 'sections.cart.title' | t }}">
        {% render 'icon-cart-10' %}
        <span class="no-rules-cart-count" aria-hidden="true" data-cart-count>{%- if cart.item_count < 100 -%}{{ cart.item_count }}{%- else -%}{{ 'sections.cart.item_99' | t }}{%- endif -%}</span>
      </a>
    </div>
  </div>

  <div id="no-rules-menu-drawer-{{ section.id }}" class="no-rules-menu-drawer" role="dialog" aria-modal="true" aria-label="{{ 'sections.header.menu' | t }}" hidden>
    <div class="no-rules-menu-drawer__overlay" data-no-rules-close-menu aria-label="{{ 'general.accessibility.close' | t }}"></div>
    <div class="no-rules-menu-drawer__panel">
      <button type="button" class="no-rules-menu-drawer__close" data-no-rules-close-menu aria-label="{{ 'general.accessibility.close' | t }}">{% render 'icon-close', class: 'no-rules-close-icon' %}</button>
      <nav class="no-rules-menu-drawer__nav" aria-label="Main">
        {% for link in linklists[section.settings.menu].links %}
          <a href="{{ link.url }}" class="no-rules-menu-drawer__link">
            {% if link.title == "mushq" %}
            <img src="/cdn/shop/files/Website_logo.png?v=1760954922&width=300" class="no-mushq-logo" height="25">
            {% else %}
              {{ link.title }}
            {% endif %}

          </a>
        {% endfor %}
      </nav>
      <div class="no-rules-menu-drawer__actions">
        {% if shop.customer_accounts_enabled and section.settings.show_login %}
          <a href="{{ routes.account_login_url }}" class="no-rules-menu-drawer__action"{% if no_rules_login_use_sidebar %} data-open-auth-sidebar{% endif %}>
            {% render 'icon-account-2' %}
            <span>{{ 'customer.log_in' | t }}</span>
          </a>
        {% endif %}
        <a href="{{ routes.search_url }}" class="no-rules-menu-drawer__action">
          {% render 'icon-search-03' %}
          <span>{{ 'general.search.search' | t }}</span>
        </a>
        <a href="{{ routes.cart_url }}" class="no-rules-menu-drawer__action"{% if settings.show_quick_cart %} data-cart-sidebar{% endif %}>
          {% render 'icon-cart-10' %}
          <span>{{ 'sections.cart.title' | t }} (<span data-cart-count>{%- if cart.item_count < 100 -%}{{ cart.item_count }}{%- else -%}{{ 'sections.cart.item_99' | t }}{%- endif -%}</span>)</span>
        </a>
      </div>
    </div>
  </div>
</header>

<style>
 #MainContent {
  padding-bottom: 20px;
  overflow-x: hidden;
}
  a#cart-icon-bubble {
  position:relative;
}
.no-rules-menu-drawer__actions {
    display: none;
}
span.no-rules-cart-count {
    background: #fff;
    position: absolute;
    top: -7px;
    right: -6px;
    border-radius: 30px;
    font-size: 11px;
    line-height: normal;
}
  @media(max-width:767px){
    .no-rules-cart-count {
      top: 4px !important;
      font-size: 9px !important;
    }
  }
  .no-rules-header { background: #fff; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 100; }
.no-rules-promo-bar {
    text-align: center;
    font-size: 14px;
    padding: 10px 16px;
    background: #dcb8ba;
    margin: 0;
    color: #fff;
}
  .no-rules-header-inner { max-width: 1440px; margin: 0 auto; padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; gap: 24px; flex-wrap: wrap; }
  .no-rules-header-inner__left { display: none; }
  .no-rules-menu-toggle { display: flex; padding: 8px; margin: -8px 0 -8px -8px; background: none; border: none; cursor: pointer; color: #1a1a1a; align-items: center; justify-content: center; min-height: 50px; min-width: 46px; }
  .no-rules-menu-toggle:hover { opacity: 0.8; }
  .no-rules-menu-toggle .no-rules-menu-toggle__close { display: none; }
  .no-rules-header--menu-open .no-rules-menu-toggle .no-rules-menu-toggle__icon { display: none; }
  .no-rules-header--menu-open .no-rules-menu-toggle .no-rules-menu-toggle__close { display: block; }
  .no-rules-menu-toggle svg { width: 22px; height: 22px; display: block; }
  .no-rules-logo img { width: 156px; height: auto; display: block; }
  .no-rules-logo-text { font-weight: 700; font-size: 1.25rem; }
  .no-rules-nav { display: flex; gap: 28px; flex-wrap: wrap; }
  .no-rules-nav a { font-size: 14px; font-weight: 500; text-decoration: none; color: inherit; }
  .no-rules-nav a:hover { text-decoration: underline; }
  .no-rules-header-actions { display: flex; align-items: center; gap: 20px; }
  .no-rules-header-action { display: inline-flex; align-items: center; gap: 6px; text-decoration: none; color: #1a1a1a; font-size: 14px; font-weight: 600; }
  .no-rules-header-action:hover { opacity: 0.8; }
  .no-rules-header-action svg { width: 16px; height: 16px; flex-shrink: 0; }
  .no-rules-header-action .icon { width: 16px; height: 16px; display: block; }
  .no-rules-cart-count { min-width: 1.25em; text-align: center; font-size: 12px; }
  /* Mobile drawer */
  .no-rules-menu-drawer { position: fixed; inset: 0; z-index: 999; pointer-events: none; }
  .no-rules-menu-drawer[hidden] { display: block !important; visibility: hidden; }
  .no-rules-menu-drawer.is-open { pointer-events: auto; visibility: visible; }
  .no-rules-menu-drawer.is-open .no-rules-menu-drawer__overlay { opacity: 1; }
  .no-rules-menu-drawer.is-open .no-rules-menu-drawer__panel { transform: translateX(0); }
  .no-rules-menu-drawer__overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.4); opacity: 0; transition: opacity 0.25s ease; cursor: pointer; }
  .no-rules-menu-drawer__panel { position: absolute; top: 0; left: 0; bottom: 0; width: min(320px, 85vw); background: #fff; box-shadow: 4px 0 24px rgba(0,0,0,0.12); transform: translateX(-100%); transition: transform 0.25s ease; display: flex; flex-direction: column; padding: 24px 0; overflow-y: auto; }
  .no-rules-menu-drawer__close { position: absolute; top: 16px; right: 16px; padding: 8px; background: none; border: none; cursor: pointer; color: #1a1a1a; }
  .no-rules-menu-drawer__close .no-rules-close-icon { width: 24px; height: 24px; display: block; }
  .no-rules-menu-drawer__nav { display: flex; flex-direction: column; gap: 4px; padding: 48px 24px 24px; }
  .no-rules-menu-drawer__link { font-size: 16px; font-weight: 500; padding: 12px 0; text-decoration: none; color: #1a1a1a; border-bottom: 1px solid #eee; }
  .no-rules-menu-drawer__link:hover { text-decoration: underline; }
  .no-rules-menu-drawer__actions { display: flex; flex-direction: column; gap: 8px; padding: 16px 24px; margin-top: auto; border-top: 1px solid #eee; }
  .no-rules-menu-drawer__action { display: flex; align-items: center; gap: 12px; font-size: 14px; font-weight: 500; text-decoration: none; color: #1a1a1a; padding: 12px 0; }
  .no-rules-menu-drawer__action:hover { text-decoration: underline; }
  .no-rules-menu-drawer__action svg { width: 22px; height: 22px; flex-shrink: 0; }
  /* Mobile: same layout as header-mobile (1025px breakpoint, hamburger left | logo center | icons right) */
  @media screen and (min-width: 1025px) {
    #no-rules-header-{{ section.id }} .no-rules-menu-drawer { display: none !important; }
  }
  @media screen and (max-width: 1024px) {
    #no-rules-header-{{ section.id }}.no-rules-header { box-shadow: 0 1px 3px rgb(0 0 0 / 10%); }
    #no-rules-header-{{ section.id }} .no-rules-header-inner { flex-wrap: nowrap; justify-content: space-between; padding: 0 16px; min-height: 50px; gap: 0; }
    #no-rules-header-{{ section.id }} .no-rules-header-inner__left { display: flex !important; min-width: 46px; flex: 0 0 auto; align-items: center; justify-content: flex-start; order: 1; }
    #no-rules-header-{{ section.id }} .no-rules-logo { flex: 1 1 auto; min-width: 0; display: flex !important; align-items: center; justify-content: center; padding: 8px 12px; order: 2; }
    #no-rules-header-{{ section.id }} .no-rules-nav { display: none !important; }
    #no-rules-header-{{ section.id }} .no-rules-header-inner__right { display: flex !important; flex: 0 0 auto; min-width: 46px; align-items: center; justify-content: flex-end; gap: 12px; order: 3; }
    #no-rules-header-{{ section.id }} .no-rules-logo img { max-width: 120px; width: auto; }
    #no-rules-header-{{ section.id }} .no-rules-header-actions .no-rules-action-label { display: none; }
    #no-rules-header-{{ section.id }} .no-rules-header-action { padding: 10px 0; }
    #no-rules-header-{{ section.id }} .no-rules-header-inner__right .no-rules-header-action--cart { padding-right: 4px; }
  }
</style>

<script>
  (function() {
    var header = document.getElementById('no-rules-header-{{ section.id }}');
    if (!header) return;
    var toggle = header.querySelector('[data-no-rules-mobile-menu]');
    var drawer = header.querySelector('.no-rules-menu-drawer');
    var closeTriggers = header.querySelectorAll('[data-no-rules-close-menu]');
    var drawerLinks = drawer ? drawer.querySelectorAll('.no-rules-menu-drawer__link') : [];

    function openMenu() {
      if (!drawer) return;
      drawer.hidden = false;
      drawer.classList.add('is-open');
      if (toggle) { toggle.setAttribute('aria-expanded', 'true'); }
      document.body.style.overflow = 'hidden';
    }
    function closeMenu() {
      if (!drawer) return;
      drawer.classList.remove('is-open');
      if (toggle) { toggle.setAttribute('aria-expanded', 'false'); }
      document.body.style.overflow = '';
      setTimeout(function() { drawer.hidden = true; }, 250);
    }

    if (toggle && drawer) {
      toggle.addEventListener('click', function() {
        if (drawer.classList.contains('is-open')) closeMenu();
        else openMenu();
      });
    }
    closeTriggers.forEach(function(el) {
      el.addEventListener('click', closeMenu);
    });
    drawerLinks.forEach(function(link) {
      link.addEventListener('click', closeMenu);
    });
  })();
</script>
{% schema %}
{
  "name": "NO RULES Header",
  "class": "section-no-rules-header",
  "settings": [
    { "type": "text", "id": "promo_text", "label": "Promo bar text", "default": "Save up to 15% with Packs" },
    { "type": "image_picker", "id": "logo", "label": "Logo image" },
    { "type": "link_list", "id": "menu", "label": "Menu" },
    {
      "type": "header",
      "content": "Header icons"
    },
    {
      "type": "checkbox",
      "id": "show_login",
      "label": "Show Log In / Account",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_login_text",
      "label": "Show \"Log In\" text next to icon",
      "default": true
    }
  ],
  "presets": [{ "name": "NO RULES Header" }]
}
{% endschema %}
